---
prerequisite_packages:
  - fedora-workstation-repositories
  - https://mirrors.rpmfusion.org/free/fedora/rpmfusion-free-release-$(rpm -E %fedora).noarch.rpm
  - https://mirrors.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-$(rpm -E %fedora).noarch.rpm

pre_install:
  run:
    - flatpak remote-modify fedora --disable
    - flatpak remote-modify fedora-testing --disable
    - >
      grep 'fastestmirror=1' /etc/dnf/dnf.conf ||
      echo 'fastestmirror=1' |
      sudo tee -a /etc/dnf/dnf.conf
    - >
      grep 'max_parallel_downloads=10' /etc/dnf/dnf.conf ||
      echo 'max_parallel_downloads=10' |
      sudo tee -a /etc/dnf/dnf.conf
    - >
      grep 'defaultyes=True' /etc/dnf/dnf.conf ||
      echo 'defaultyes=True' |
      sudo tee -a /etc/dnf/dnf.conf
    - sudo dnf groupupdate core -y

packages:
  - bat
  - lsd
  - fontawesome-fonts-web
  - google-carlito-fonts
  - hddtemp
  - htop
  - lm_sensors
  - lshw
  - mediainfo
  - nvme-cli
  - openssh
  - p7zip
  - procinfo
  - procs
  - pv
  - smartmontools
  - package: util-linux-user
    purpose: Provides `chsh` to change to zsh
  - zsh
  - zsh-autosuggestions
  - zsh-syntax-highlighting

remove:
  - cheese
  - gnome-boxes
  - gnome-shell-extension-window-list
  - gnome-tour
  - gnome-photos
  - gnome-maps
  - gnome-help
  - abiword
  - mediawriter
  - fedora-chromium-config
  - blueman-nautilus
  # - PackageKit-gstreamer-plugin
  # - PackageKit
  # - PackageKit-command-not-found
  # - gnome-software

post_install:
  run:
    - echo ''
    # - sudo dnf install -y --setopt=install_weak_deps=False
    # - sudo systemctl disable packagekit.service
    # - sudo systemctl mask packagekit.service
    # - sudo systemctl disable packagekit-offline-update.service
    # - sudo systemctl mask packagekit-offline-update.service
